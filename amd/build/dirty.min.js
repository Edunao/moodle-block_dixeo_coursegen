/**
 * AMD module for settings UI.
 *
 * @module     block_dixeo_coursegen/dirty
 * @author     Josemaria Bolanos <admin@mako.digital>
 * @copyright  2025 Dixeo (contact@dixeo.com)
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("block_dixeo_coursegen/dirty",["jquery"],(function($){return{init:function(){const form=document.getElementById("adminsettings");if(!form)return;const initial=new Map;function isDirty(){let dirty=!1;return $(form).find("input, select, textarea").each((function(){const el=this;if(!el.name||!initial.has(el.name))return;("checkbox"===el.type||"radio"===el.type?el.checked:el.value)==initial.get(el.name)||(dirty=!0)})),dirty}$(form).find("input, select, textarea").each((function(){const el=this;if(!el.name)return;const val="checkbox"===el.type||"radio"===el.type?el.checked:el.value;initial.set(el.name,val)}));const register=form.querySelector("button.dixeo-register-button");if(!register)return;const needsRegistration=form.querySelector(".dixeo-register-instructions .needs-registration");if(!needsRegistration)return;const needsSaving=form.querySelector(".dixeo-register-instructions .needs-saving");needsSaving&&($(form).on("input change",(()=>{register.disabled=isDirty(),isDirty()?(needsRegistration.classList.add("hidden"),needsSaving.classList.remove("hidden")):(needsRegistration.classList.remove("hidden"),needsSaving.classList.add("hidden"))})),register.addEventListener("click",(e=>{if(e.preventDefault(),isDirty())return!1;{const href=register.dataset.url;return!!href&&(window.location.assign(href),!0)}})))}}}));

//# sourceMappingURL=dirty.min.js.map