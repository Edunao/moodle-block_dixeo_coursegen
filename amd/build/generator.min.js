define(["jquery","core/ajax"],(function(e,r){const t=document.getElementById("edai_course_generator_form"),s=t.querySelector(".prompt-container"),n=t.querySelector(".generation-container"),o=t.querySelector("#course_description"),l=t.querySelector("#generate_course"),i=t.querySelector("#course_files"),a=document.getElementById("file_names"),c=t.querySelector("#progress-spinner"),d=t.querySelector("#loader"),g=t.querySelector("#success_message_container");return{init:function(){this.progress=0;const r=o.clientHeight;o.addEventListener("input",(function(){const e=parseFloat(getComputedStyle(o).lineHeight),t=o.value.split("\n").length;let s;t*e<r?s=r:t<=9?(s=t*e,o.style.overflowY="hidden"):(s=9*e,o.style.overflowY="scroll"),s+=s>r?14:0,o.style.height=s+"px"})),i.addEventListener("change",(()=>this.displayFileNames())),l.addEventListener("click",(e=>{e.preventDefault(),d.classList.replace("d-none","d-block"),0===this.progress?(this.startProgress(d),c.classList.add("spinner-border"),n.classList.replace("d-none","d-block")):this.progress<100?(this.setProgress(d,100),g.classList.replace("d-none","d-block"),c.classList.remove("spinner-border")):(this.setProgress(d,0),g.classList.replace("d-block","d-none"),c.classList.remove("spinner-border"),n.classList.replace("d-block","d-none"))})),dragEnterCounter=0,e(".prompt-container .form-group").bind({dragenter:function(e){dragEnterCounter++,s.classList.add("drag-over"),e.preventDefault()},dragleave:function(){dragEnterCounter--,0===dragEnterCounter&&s.classList.remove("drag-over")}})},startProgress:function(e){let r=setInterval((()=>{this.progress>=90&&clearInterval(r);let t=Math.floor(5*Math.random());this.setProgress(e,this.progress+t)}),1e3)},setProgress:function(e,r){let t=e.querySelector(".s-progress--bar");t.style.width=`${r}%`,r>=100?t.classList.add("done"):t.classList.remove("done"),this.progress=r},displayFileNames:function(){a.innerHTML="";for(let e=0;e<i.files.length;e++){const r=i.files[e],t=document.createElement("div");t.textContent=r.name,t.style.fontWeight="bold",a.appendChild(t)}}}}));